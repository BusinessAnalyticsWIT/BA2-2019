<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"
          type="text/css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"
          rel="stylesheet"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
      

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



      

html, body {
  height: 100%;
  margin: 0;
}
.wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.footer {
  background: white;
  text-align: right;
}
.content {
  flex: 1;
  overflow: auto;
}



    </style>
  </head>

  
  

  <div class="ui fixed top pointing inverted stackable menu labmenu">
    <header class="header item">
      <i id="toc" class="sitemap icon"></i>
      
        <a href="../index.html"> Introduction to the use of classification for prediction  </a>
      
    </header>
    <div class="right tab-menu menu">
      
        <a class="item" data-tab="Lab-10">
          Lab-10
        </a>
      
        <a class="item" data-tab="01">
          01
        </a>
      
        <a class="item" data-tab="02">
          02
        </a>
      
        <a class="item" data-tab="03">
          03
        </a>
      
        <a class="item" data-tab="04">
          04
        </a>
      
    </div>
  </div>


  

  <div class="ui pushable">
    <div class="ui inverted labeled icon left inline vertical sidebar menu">
      <br><br>
      
        
          
            <a class="item"
               href="http://businessanalyticswit.github.io/BA2-2019//topic-01-Python-Data-Exploration/book-a/index.html">Lab-01 </a>
          
        
      
        
          
            <a class="item"
               href="http://businessanalyticswit.github.io/BA2-2019//topic-02-Data-Management/book/index.html">Lab-02 </a>
          
        
      
        
          
            <a class="item"
               href="http://businessanalyticswit.github.io/BA2-2019//topic-02-Data-Management/book-a/index.html">Lab-03 </a>
          
        
      
        
          
            <a class="item"
               href="http://businessanalyticswit.github.io/BA2-2019//topic-03-Visualisation/book/index.html">Lab-04 </a>
          
        
      
        
          
            <a class="item"
               href="http://businessanalyticswit.github.io/BA2-2019//topic-03-Visualisation/book-a/index.html">Lab-05 </a>
          
        
      
        
          
            <a class="item"
               href="http://businessanalyticswit.github.io/BA2-2019//topic-04-Hypothesis-Testing/book/index.html">Lab-06 </a>
          
        
      
        
          
            <a class="item"
               href="http://businessanalyticswit.github.io/BA2-2019//topic-04-Hypothesis-Testing/book-ca/index.html">Lab-07 </a>
          
        
      
        
          
            <a class="item"
               href="http://businessanalyticswit.github.io/BA2-2019//topic-05-Regression-Clustering/book/index.html">Lab-08 </a>
          
        
      
        
          
            <a class="item"
               href="http://businessanalyticswit.github.io/BA2-2019//topic-05-Regression-Clustering/book-a/index.html">Lab-09 </a>
          
        
      
        
          
            <a class="item"
               href="http://businessanalyticswit.github.io/BA2-2019//topic-06-Classification/book/index.html">Lab-10 </a>
          
        
      
    </div>
    <div class="pusher" tabindex="-1">
      <div class="ui basic segment">
        <br>
        
          <div class="ui tab segment lab" data-tab="Lab-10">
            <h1>Objectives</h1>
<p>More Excel - binary classification </p>
<p>Notes developed using material produced by Daniel Egger from Duke University. Copyright Daniel Egger/ Attribution 4.0 International (CC BY 4.0)</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="01">
            <h1>Binary Classification</h1>
<p>Binary classification is the process of determining the classification of something with either a positive or a negative.</p>
<p>This methodology dates from the 1940&#39;s when decisions had to be made based on radar signals whether to send up fighter pilots or not. The cost of a false positive was the burning of aviation fuel, and exhausting the pilots. The cost of false negative could have catastrophic consequences.</p>
<p>The methodology known as receiver operating characteristic curve or ROC curve was developed for this purpose. The curve itself allowed decision makers to choose when to make a positive classification based on their best estimate for the cost of making a false positive and a false negative. Maximising the area under the ROC curve is a good measure of the power of a binary classification model to discriminate signal from noise that is still used.</p>
<p>In the following example we have two conditions, the radar signal either indicates Bombers or Seagulls. We also have two classifications called Positive (send up the fighters) and Negative (do nothing).</p>
<p>This produces a 2*2 grid with four possible classifications and conditions. It is traditional to locate the actual condition to the left of the grid, thus showing (+) for bombers and (-) for seagulls below. The same for the classification at the top, a positive one to the left, negative to the right. This allows us to label the four squares on the grid as True Positive, False Positive, False Negative, True Negative.</p>
<p>This is called the confusion matrix:</p>
<p><img src="./img/01.png" alt=""></p>
<p>In this example the ROC curve works in that each radar image is assigned a numerical score that corresponds to the actual area of the blur on the radar screen.</p>
<p><img src="./img/02.png" alt=""></p>
<p>The actual condition wheather it is a bomber or a seagull is also tracked. After data is collected, pairs of scores and actual conditions are placed in ranked order from highest to lowest score.</p>
<p>Fighter command could determine that no image on the radar justified a positive classification, thus every classification would be negative.
Alternatively they could decide that every image on the radar justified a positive classification, thus every classification would be positive.</p>
<p>In reality the threshold between positive and negative classifications is always set somewhere in between those two extremes, the threshold usually depends on the cost of false classifications.</p>
<p>A False positive &quot;rate&quot; is the total number of false positive classifications, divided by the total number of seagulls.
A True positive &quot;rate&quot; is the total number of true positive classifications, divided by the total number of bombers.</p>
<p>The ROC curve is drawn by identifying for a given threshold, its false positive rate and its true positive rate then plot these points where the x and y axis meet. The x axis is the false positive rate and y axis is the true positive rate. Plot these coordinates for each threshold between  the highest and the lowest scores. Summing the area beneath the curve gives the Area Under the Curve (AUC)</p>
<p><img src="./img/03.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="02">
            <h1>Confusion Matrix</h1>
<p>When we have binary outcomes and a binary classification, we can be right in two different ways and we can be wrong in two different ways.</p>
<p>When we correctly classify an event as positive this is known as a True Positive.
When we correctly classify an event as negative this is known as a True Negative.</p>
<p>How can we achieve a good result, while minimizing the errors?
When we incorrectly classify an event as positive this is known as a False Positive.
When we incorrectly classify an event as negative this is known as a False Negative (perhaps the biggest error).</p>
<p>So in our situation with our bombers and seagulls, we have 20 observations, of which 3 turned out to be bombers and 17 were seagulls. In terms of the numerical rating the 3 bombers are shown in red and the seagulls in black.</p>
<p>When the ratings are ranked the 3 bombers are not all at the top, they appear at 92, 83 and 75. If they were all at the top it would make the job of setting the threshold very easy but that&#39;s not the case.</p>
<p><img src="./img/04.png" alt=""></p>
<p>We could decide to put our threshold at 80. We would have two true positives (83 and 93) and one false negative (75). Or we could put it at 70 and have three true positives and no false negatives. However how many false positives would we have? We want to avoid sending our planes up when actually it is just a seagull! If we stuck with a threshold of 70 we would have 7 false positives.</p>
<p>Using the confusion matrix we can populate the four boxes for the chosen threshold.</p>
<p>At a threshold of 80 we would have the following:</p>
<p>2 true positives
1 false negative
4 false positives
13 true negatives</p>
<p>At the threshold of 80 our matrix looks like this:</p>
<p><img src="./img/05.png" alt=""></p>
<p>What would happen if our threshold was at 70?</p>
<p>Our binary classifications system involves something that generates ratings that can be turned into rankings to which we can apply a threshold. Everything below the threshold is negative and everything above the threshold is positive.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="03">
            <h1>Optimal Threshold</h1>
<p>The typical way that we characterize a particular threshold is by its false positive rate and its true positive rate.</p>
<p>A false positive rate is the number of false positives divided by the total number of negatives.
The true positive rate is the opposite, the number of true positives divided by the total number of positives.</p>
<p>At a threshold of 80 we would have the following:</p>
<ul>
<li>2 true positives</li>
<li>1 false negative</li>
<li>4 false positives</li>
<li>13 true negatives</li>
</ul>
<p><img src="./img/05.png" alt=""></p>
<p>In this we have a total of 17 negatives, 13 that were true and 4 that were false positives.</p>
<p>It has a false positive rate of 4 divided by 17.</p>
<p>In this case 2 true positives divided by the total positives which is 3. Therefore it has a true positive rate of 2/3rds.</p>
<p>And at our threshold of 70,</p>
<p><img src="./img/06.png" alt=""></p>
<p>Has a false positive range of 7/17ths, but it has a true positive range of one (3/3).</p>
<p>Each ordered pair where x is equal to the false positive rate, y is equal to the true positive rate.</p>
<ul>
<li>x=  FP rate</li>
<li>y = TP rate</li>
</ul>
<p>every threshold has it&#39;s corresponding point on the plot.</p>
<p>Each of these points can be plotted on an x y coordinate plane, and so every threshold has its corresponding point. So the threshold of 80 would have the point 4/17ths, so that&#39;s a little bit less than a quarter and two thirds, 4/17ths, 2/3rds and 7/17ths 1.</p>
<p>So, this is a representation of</p>
<p>The false positive rates and the true positive rates, at all possible thresholds.</p>
<p><img src="./img/03.png" alt=""></p>
<p>It shows at each threshold the intersection between false positive and true positive rates.</p>
<p>And the shaded area is called the area under the curve.</p>
<p>Which in the case of our example is equal to .82 (more on this in our next lab).</p>
<p>Which is quite a reasonable, decent rate for a diagnostic or for any kind of tool that&#39;s trying to discriminate between two states.</p>
<p>How much it&#39;s actually going to cost us, our cost function, is dependent upon the cost for each mistake.</p>
<p>So generally, False negative mistakes are very expensive, Bombers get through and they destroy a lot of things.</p>
<p>Then False positive mistakes are also expensive, we sent up a bunch of planes and we used up fuel and we also had the risk that our planes were one place where bombers might be somewhere else.</p>
<p>We will see when we work with some quiz problems and with Excel spreadsheets that where you put your threshold is going to be determined by the relative size of these two costs.</p>
<p>So in a situation where bombers getting through is hugely expensive relative to the cost of sending up planes. Then you really, really want the smallest possible number of False Negatives here.</p>
<p>Thus we&#39;re willing to go for a lower threshold.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="04">
            <h1>Calculating Positive and Negative Predictive Values</h1>
<p>Now we will use another example of binary classification, this one is a typical distribution for a cancer diagnostic. It is a protein blood test that identifies a rare cancer. It has an incidence rate of 1% in the population we are studying. This means individuals getting the blood test have a 1% chance of having the cancer and 99% of not.</p>
<p>This test would be considered a good test because:</p>
<p>Its true positive rate is 95% (true positives divided by actual incidence of condition).
and
Its true negative rate is 80% (true negatives divided by the incidence of not having the condition).</p>
<p><img src="./img/07.png" alt=""></p>
<p>If you come to the doctors office and get a positive test result you might be alarmed if you had been told the test has a true positive rate of 95%.</p>
<p>The true positive rate is the conditional probability of having a positive test where I do have cancer.</p>
<p>P(positive test/+ cancer)</p>
<p>The true negative rate is the conditional probability of having a negative test where I don&#39;t have cancer.
P(negative test/- cancer)</p>
<p>That isn&#39;t really what we want to know.</p>
<p>What we want to know is:</p>
<ul>
<li>What is the conditional probability of having the condition having received a positive blood test?</li>
</ul>
<pre><code>
Positive Predictive Value

P(+ cancer/ positive test)</code></pre>
<ul>
<li>What is the probability of us not having the condition when we receive a negative blood test?</li>
</ul>
<pre><code>
Negative Predictive Value

P(- cancer/ negative test)</code></pre>
<p>The way we calculate these is to use the true positive value divided by the total number of positive classifications.</p>
<p><img src="./img/09.png" alt=""></p>
<pre><code>Positive predictive value

.0095/.2075 = 4.58%</code></pre>
<p>I have a 4.58% chance of having cancer.</p>
<pre><code>
Negative predictive value

.792/.7925 = 99.937%</code></pre>
<p>I have a 99.937% chance of not having cancer.</p>

          </div>
        
      </div>
    </div>
  </div>


  <br>
  <script>
    $(document).on('keydown', function(e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

    $(document).ready(function() {
  $('img').addClass('ui image');

  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass(
        'ui basic segment',
      );
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass(
        'ui blue ribbon label',
      );
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.menu .item').tab({
    history: true,
    historyType: 'hash',
  });

  $('.popup').popup();

  $('.ui.sidebar')
    .sidebar({ context: $('.pushable') })
    .sidebar('setting', 'transition', 'slide out')
    .sidebar('attach events', '#toc');
});

  </script>



  <div class="ui bottom fixed borderless right menu">
    <div class="ui right small menu">
      <div class="ui tiny basic message segment">
         Powered by <a href="https://github.com/edeleastar/tutors-ts">tutors-ts.</a> 
      </div>
    </div>
  </div>

  </body>

</html>